<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Bed {{ patient.selectedBedId }}
      <span *ngIf="patient.current.naam" style="font-size: 0.8em; opacity: 0.9;">
          - {{ patient.current.naam }}
      </span>
    </ion-title>

    <ion-buttons slot="end">
      <div class="bed-selector-box">
  <ion-icon name="bed-outline"></ion-icon>

  <ion-select
    [value]="patient.selectedBedId"
    (ionChange)="wisselBed($event)"

    interface="popover"
    [interfaceOptions]="{'cssClass': 'mijn-bed-popover'}"

    placeholder="Kies"
    toggleIcon="chevron-down-outline">

    <ion-select-option *ngFor="let bed of patient.beds" [value]="bed.bedId">
      Bed {{ bed.bedId }} <span *ngIf="bed.naam">({{ bed.naam }})</span>
    </ion-select-option>

  </ion-select>
</div>
    </ion-buttons>

  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <ion-card class="data-card">
    <ion-card-header>
      <ion-card-title>Patiënt Gegevens</ion-card-title>
    </ion-card-header>

    <ion-card-content>

      <ion-grid style="padding: 0; margin-bottom: 5px;">
        <ion-row>
          <ion-col size="8">
            <ion-input
              class="custom-green-input"
              label="Naam / Initialen"
              label-placement="floating"
              fill="outline"
              type="text"
              [(ngModel)]="patient.current.naam"
              (ionInput)="dataGewijzigd()">
            </ion-input>
          </ion-col>

          <ion-col size="4">
            <ion-input
              class="custom-green-input"
              label="Leeftijd"
              label-placement="floating"
              fill="outline"
              type="number"
              inputmode="decimal"
              placeholder=""
              [(ngModel)]="patient.current.leeftijd"
              (ionInput)="dataGewijzigd()">
            </ion-input>
          </ion-col>
        </ion-row>
      </ion-grid>

      <ion-segment [(ngModel)]="patient.current.geslacht" (ionChange)="dataGewijzigd()" class="gender-segment" mode="ios" style="margin-bottom: 20px;">
        <ion-segment-button value="M">
          <ion-icon name="male-outline"></ion-icon> <ion-label>Man</ion-label>
        </ion-segment-button>
        <ion-segment-button value="V">
          <ion-icon name="female-outline"></ion-icon> <ion-label>Vrouw</ion-label>
        </ion-segment-button>
      </ion-segment>

      <ion-grid style="padding: 0;">
        <ion-row>
          <ion-col size="6">
            <ion-input
              class="custom-green-input"
              label="Lengte (cm)"
              label-placement="floating"
              fill="outline"
              type="number"
              inputmode="decimal"
              placeholder=""
              [(ngModel)]="patient.current.lengte"
              (ionInput)="dataGewijzigd()">
            </ion-input>
          </ion-col>
          <ion-col size="6">
            <ion-input
              class="custom-green-input"
              label="Gewicht (kg)"
              label-placement="floating"
              fill="outline"
              type="number"
              inputmode="decimal"
              placeholder=""
              [(ngModel)]="patient.current.gewicht"
              (ionInput)="dataGewijzigd()">
            </ion-input>
          </ion-col>
        </ion-row>
      </ion-grid>

      <div *ngIf="patient.current.ibw || patient.current.bsa" style="margin-top: 25px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
        <ion-item lines="none" class="result-item" style="--background: transparent; --min-height: 30px;">
          <ion-label style="color: #aaa;">Ideaal Gewicht (IBW)</ion-label>
          <ion-note slot="end" style="font-size: 1.2em; font-weight: bold; color: #28a745;">
            {{ patient.current.ibw | number:'1.0-0' }} kg
          </ion-note>
        </ion-item>

        <ion-item lines="none" class="result-item" style="--background: transparent; --min-height: 30px;">
          <ion-label style="color: #aaa;">Lichaamsoppervlak (BSA)</ion-label>
          <ion-note slot="end" style="font-size: 1.2em; font-weight: bold; color: #28a745;">
            {{ patient.current.bsa | number:'1.2-2' }} m²
          </ion-note>
        </ion-item>
      </div>

      <div style="margin-top: 30px; text-align: center;">
        <ion-button color="danger" fill="outline" (click)="wisPatient()">
          <ion-icon name="trash-outline" slot="start"></ion-icon>
          Patiënt Ontslag / Wissen
        </ion-button>
      </div>

      <div style="text-align: center; margin-top: 40px; margin-bottom: 10px; padding: 0 20px;">
        <ion-text color="medium">
          <p style="font-size: 0.7em; line-height: 1.4; font-style: italic; opacity: 0.6;">
            Disclaimer: Deze applicatie is bedoeld als ondersteunend hulpmiddel voor professionals.
            De auteur aanvaardt geen aansprakelijkheid voor de uitkomsten.
            Verifieer berekeningen altijd voor klinisch gebruik.
            <br>
Voor meer info mail naar
<a href="mailto:info.webapp@icloud.com" style="color: #69f0ae; text-decoration: none; font-weight: bold;">
  info.webapp@icloud.com
</a>
<br>
            <strong>© 2026 Ben de Boer</strong>
          </p>
        </ion-text>
      </div>

    </ion-card-content>
  </ion-card>
</ion-content>
